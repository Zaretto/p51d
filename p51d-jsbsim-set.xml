<?xml version="1.0"?>
<!--
************************************************************************
P-51D simulation config. This files ties together all the components
used by FGFS to represent the P-51D. Components include the flight data 
model, instrument panel, and external 3D model.

March 2003 Jim Wilson, jimw@kelcomaine.com
Apr. 2010 Hal V. Engel hvengel@astound.net (JSBSim model)
************************************************************************
-->

<PropertyList>


 <sim>

  <description>P-51D (JSBSim)</description>
  <author>Jim Wilson, Jon Berndt and Hal V. Engel (JSBSim FDM)</author>
   
  <flight-model>jsb</flight-model>
  <aero>p51d-jsbsim</aero>
  <fuel-fraction>0.50</fuel-fraction>
  
  <startup>
     <splash-texture>Aircraft/p51d/P-51D-splash.png</splash-texture>
  </startup>

  <virtual-cockpit archive="y">true</virtual-cockpit>
  <allow-toggle-cockpit archive="y">true</allow-toggle-cockpit>
  
  <sound>
   <audible>true</audible>
   <path>Aircraft/p51d/p51d-sound.xml</path>
   <volume type="double">0.26</volume>
  </sound>

  <submodels> 
    <serviceable type="bool">true</serviceable>
    <path>Aircraft/p51d/submodels.xml</path>
  </submodels>

  <panel>
  <path>Aircraft/Generic/Panels/generic-vfr-panel.xml</path>
  <visibility>false</visibility>
  </panel>

  <model>
   <path>Aircraft/p51d/Models/p51d-jw-jsbsim.xml</path>
  </model> 

  <view n="0">
   <internal archive="y">true</internal>
   <config>
    <x-offset-m archive="y" type="double">0.0</x-offset-m>
    <y-offset-m archive="y" type="double">0.730</y-offset-m>
    <z-offset-m archive="y" type="double">4.495</z-offset-m>
    <pitch-offset-deg>-17.5</pitch-offset-deg>
   </config>
  </view>

  <view n="1">
   <config>
    <target-z-offset-m archive="y" type="double">3.949</target-z-offset-m>
   </config>
  </view>

  <view n="2">
   <config>
    <target-z-offset-m archive="y" type="double">3.949</target-z-offset-m>
   </config>
  </view>

  <view n="3">
   <config>
    <target-z-offset-m archive="y" type="double">3.949</target-z-offset-m>
   </config>
  </view>

  <view n="4">
   <config>
    <target-z-offset-m archive="y" type="double">3.949</target-z-offset-m>
   </config>
  </view>

  <view n="5">
   <config>
    <target-z-offset-m archive="y" type="double">3.949</target-z-offset-m>
   </config>
  </view>

  <view n="6">
   <config>
    <target-z-offset-m archive="y" type="double">3.949</target-z-offset-m>
   </config>
  </view>

 <autopilot>
   <config>
     <min-climb-speed-kt type="float">120.0</min-climb-speed-kt>
     <best-climb-speed-kt type="float">148.0</best-climb-speed-kt>
     <target-climb-rate-fpm type="float">1000.0</target-climb-rate-fpm>
     <target-descent-rate-fpm type="float">2000.0</target-descent-rate-fpm>
     <elevator-adj-factor type="float">4000.0</elevator-adj-factor>
     <integral-contribution type="float">0.01</integral-contribution>
     <zero-pitch-throttle type="float">0.45</zero-pitch-throttle>
     <zero-pitch-trim-full-throttle type="float">0.14</zero-pitch-trim-full-throttle>
   </config>
 </autopilot>

  <hud>
   <enable3d>false</enable3d>
  </hud>

  <help>

    <line>Maximum Speed: 437 mph</line>
    <line>Cruise Speed: 363 mph</line>
    <line>Landing Speed: 100 mph</line>
    <line>Initial Climb Rate: 3475 feet per minute</line>
    <line>Sustained Climb Speed: 175 mph</line>
    <line>Service Ceiling: 41,900 (with 2nd Stage booster)</line>
    <line>Stall Speed (9000 lbs) Gear/Flaps Up: 102mph</line>
    <line>Stall Speed (9000 lbs) Gear/Flaps Down: 95mph</line>
    <text>TAKE OFF___________________________________________________
Set prop pitch to full increased rpm.
Set mixture control to Run.
Start engine with throttle opened about 1 inch and throttle back once 
the engine fires.
Move mixture control to Run position (anywhere in the middle of the 
levers range of motion).
There will be lots of torque and p-factor during take therefor:
    Trim rudder about 4 degrees to the right.
    Set the elevator trim to nose down about 3 degrees.
Slowly increase throttle to 61 inHG Manifold Pressure (MP) as you pick up speed.
Be ready to actuate rudder during the take off roll.
At about 60 MPH indicated move the stick forward to lift the tail.  You do not want the wing to start lifing before you have full control or before it has enough speed to provide lift above ground effects.
As you gain speed the amount of rudder correction to the right will need to be decreased and you may need to use left rudder depending on how much right rudder trim you set.
Hang on.  Stay on top of rudder and elevator with small adjustments and keep the nose down until rotation or you'll do a ground loop.
Rotate at 150 mph if you have enough room but never below 120 mph.
As you raise the gear the trim will change in a nose up direction.  Be carefull to avoid stalling or loosing air speed as the gear is retracted.
All of the take off trim settings will need to be adjusted as you pick up speed so this will contribute to a high pilot work load during the take off.
CLIMB______________________________________________________
Back off MP to 46 inHG.
Adjust propeller pitch to 2700 rpm.
The throttle has automatic boost controls and will hold the manifold pressure setting as long as the superchager has enough boost to provide the selected setting.  It will hold 46 inHg to about 30,000 feet.

FLYING_____________________________________________________
Trim and Cruise at between 2100 and 2400 rpm with between 30 and 36 inHg manifold pressure.
Do not exceed 2700 rpm or 46 inHg sustained.
Do not exceed 3000 rpm military power (aerobatics)
Do not exceed 3500 rpm in dives.
Do not exceed 61 inHG Mainfold Pressure (military power), except 75 inHG for maximum of 7 minutes (war emergency power).  Note that war emergency power is not for flying fast,  rather it is for dogfighting at &lt; 200mph.

LANDING____________________________________________________
Approach speed should be around 150 indicated.  Slow to about 120 indicated as you approach the thresold.  Full flaps with gear has lots of drag so carry some power to avoid sinking too fast or losing too much speed.
Combat flaps (first position) can be applied at 400mph indicated, second notch at 250mph,  gear at 175mph, and full flaps at 165mph or less.

Excessive braking can cause you to do a ground loop (nose over).  Some recommend raising flaps immediately after touchdown.
    </text>
  </help>
  

  <!-- multi-play bombable -->
  <multiplay>
    <generic>
        <int n="0" type="int"/>
        <int n="1" type="int"/>
        <float n="0" type="float"/>
        <float n="1" type="float"/>
        <float n="2" type="float"/>
        <string n="9" type="string"/>
    </generic>
  </multiplay>

  <!-- increase pilot g tolarance -->
  <!-- this plane has g-suit spport so the pilot
       can tollerate high G levels -->
  <rendering>
    <redout>
       <parameters>
         <blackout-onset-g type="double">5.0</blackout-onset-g>
         <blackout-complete-g type="double">7.0</blackout-complete-g>
         <redout-onset-g type="double">-2.5</redout-onset-g>
         <redout-complete-g type="double">-3.5</redout-complete-g>
       </parameters>
    </redout>
  </rendering>

  <menubar include="Dialogs/menu-bar.xml"/>
 </sim>

 <!-- set prop for the manual "bookmark" arrow on the remote compas -->
 <instrumentation>
    <magnetic-compass>
       <bookmark-heading-deg type="double">43.0</bookmark-heading-deg>
    </magnetic-compass>
 </instrumentation>

<!-- initialize control properties -->
 <controls>
   <engines>
      <engine n="0">
        <magnetos>0</magnetos>
        <supercharger-switch>0.0</supercharger-switch>
        <primer-time> 0.0 </primer-time>
        <master-bat> 0 </master-bat>
      </engine>
   </engines>
   <lighting>
      <tail-position-lights> 0 </tail-position-lights>
      <wing-position-lights> 0 </wing-position-lights>
      <red-rec-lights> 0 </red-rec-lights>
      <green-rec-lights> 0 </green-rec-lights>
      <amber-rec-lights> 0 </amber-rec-lights>
      <right-flor-pos> 0 </right-flor-pos>
   </lighting>
   <anti-ice>
     <pitot-heat> 0 </pitot-heat>
     <gun-heat> 0 </gun-heat>
   </anti-ice>
   <fuel>
      <on>0</on>
      <tank-selector>0</tank-selector>
      <tank n="1">
         <to_tank>1</to_tank>
      </tank>
      <tank n="2">
         <to_tank>2</to_tank>
      </tank>
      <tank n="3">
         <to_tank>3</to_tank>
      </tank>
      <tank n="4">
         <to_tank>4</to_tank>
      </tank>
   </fuel>
   <armament>
     <gunsight>
        <power-on>0</power-on>
        <intensity>1.0</intensity>
     </gunsight>
     <next-RX>1</next-RX>
     <instant>1</instant>
     <rockets> 0 </rockets>
     <bombs-train> 0 </bombs-train>
     <bombs-both> 0 </bombs-both>
     <guns-enabled>0</guns-enabled>
     <left-bomb-arm-chem-release>0</left-bomb-arm-chem-release>
     <right-bomb-arm-chem-release>0</right-bomb-arm-chem-release>
     <rocket-controler> 0 </rocket-controler>
     <triggerLast> 0 </triggerLast>
     <salvoCount> 1 </salvoCount>
     <trigger-released> 0 </trigger-released>
   </armament>
   <gear>
      <gear-safe-light-check>0</gear-safe-light-check>
      <gear-unsafe-light-check>0</gear-unsafe-light-check>
   </gear>
 </controls>
 <fdm>
   <jsbsim>
      <systems>
        <engine>
           <starter> 0 </starter>
        </engine>
      </systems>
   </jsbsim>
 </fdm>
<!-- <ai>
   <submodels>
      <submodel n="8">
         <count>3</count>
      </submodel>
      <submodel n="9">
         <count>3</count>
      </submodel>
      <submodel n="10">
         <count>1</count>
      </submodel>
      <submodel n="11">
         <count>1</count>
      </submodel>
   </submodels>
 </ai>-->

  <nasal>
    <p51d>
      <file>Aircraft/p51d/Nasal/over-ride-flaps.nas</file>
      <file>Aircraft/p51d/Nasal/stores.nas</file>
      <file>Aircraft/p51d/Nasal/limits.nas</file>
      <file>Aircraft/p51d/Nasal/engine-start.nas</file>
      <!--<file>Aircraft/p51d/Nasal/gear-doors.nas</file>-->
    </p51d>
  </nasal>

</PropertyList>




