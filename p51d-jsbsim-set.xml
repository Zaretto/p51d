<?xml version="1.0"?>

<!--
************************************************************************
P-51D simulation config. This files ties together all the components
used by FGFS to represent the P-51D. Components include the flight data 
model, instrument panel, and external 3D model.

March 2003 Jim Wilson, jimw@kelcomaine.com
Apr. 2010 Hal V. Engel hvengel@yahoo.com (JSBSim model)
************************************************************************
-->

<PropertyList>

 <sim include="Sim/views.xml">

  <description>North American Aviation P-51D-25-NA</description>
  <author>Jim Wilson, Jon Berndt and Hal V. Engel</author>
  <status>production</status>
  <rating>
     <FDM type="int">5</FDM>
     <systems type="int">4</systems>
     <model type="int">4</model>
     <cockpit type="int">4</cockpit>
  </rating>

   <user>
       <callsign>N5428V</callsign>
   </user>
   
  <flight-model>jsb</flight-model>
  <aero>p51d-jsbsim</aero>
  <fuel-fraction>0.50</fuel-fraction>
  
  <startup>
     <splash-texture>Aircraft/p51d/Splashs/splash1.png</splash-texture>
     <splash-texture>Aircraft/p51d/Splashs/splash2.png</splash-texture>
     <splash-texture>Aircraft/p51d/Splashs/splash3.png</splash-texture>
  </startup>

  <virtual-cockpit archive="y">true</virtual-cockpit>
  <allow-toggle-cockpit archive="y">false</allow-toggle-cockpit>
  
  <sound> 
   <audible>true</audible>
   <path>Aircraft/p51d/p51d-sound.xml</path>
   <volume type="double">0.26</volume>
  </sound>

  <submodels> 
    <serviceable type="bool">true</serviceable>
    <path>Aircraft/p51d/submodels.xml</path>
  </submodels>

  <panel>
     <path/>
     <visibility>false</visibility>
	 <visibility archive="y">false</visibility>
  </panel>

  <model>
   <path>Aircraft/p51d/Models/p51d-jw-jsbsim.xml</path>
   <livery>
     <file type="string">DD</file>
   </livery>
  </model> 

    <systems>
        <path>Aircraft/p51d/Systems/systems.xml</path>
        <autopilot n="0">
            <path>Aircraft/p51d/Systems/autopilot.xml</path>
        </autopilot>
        <autopilot n="1">
            <path>Aircraft/p51d/Systems/thunder.xml</path>
        </autopilot>
        <autopilot n="2">
            <path>Aircraft/p51d/Systems/engine.xml</path>
        </autopilot>
        <property-rule n="100">
            <path>Aircraft/p51d/Systems/views.xml</path>
        </property-rule>
    </systems>

  <hud>
   <enable3d>false</enable3d>
  </hud>

  <help include="Sim/help.xml"/>
  

  <!-- multi-play bombable -->
  <multiplay>
    <generic>
      <!--
      needed triggers for bombable
      controls/armament/rocket[1]/trigger through controls/armament/rocket[10]/trigger
      controls/armament/bomb-trigger-1 and controls/armament/bomb-trigger-2
      controls/armament/drop-tank-release-1 and controls/armament/drop-tank-release-2
      /fdm/jsbsim/systems/armament/gun-SmokeAnimated/Inner 
      /fdm/jsbsim/systems/armament/gun-SmokeAnimatedOuter
      /fdm/jsbsim/systems/armament/ejectionAnimatedOuter
      /fdm/jsbsim/systems/armament/ejectionAnimatedInner
      -->
        <int n="0" alias="/engines/engine[0]/cranking"/>
        <int n="1" />  <!-- /controls/armament/gun-trigger -->
        <int n="2" />  <!-- /controls/armament/trigger2 --> 
        <int n="4" />  <!-- /ai/submodels/submodel[12]/count -->
		<int n="5" />  <!-- /ai/submodels/submodel[13]/count -->
		<int n="6" />  <!-- /ai/submodels/submodel[14]/count -->
		<int n="7" />  <!-- /ai/submodels/submodel[15]/count -->
		<int n="8" />  <!-- /ai/submodels/submodel[16]/count -->
		<int n="9" />  <!-- /ai/submodels/submodel[17]/count -->
		<int n="10" />  <!-- /ai/submodels/submodel[18]/count -->
		<int n="11" />  <!-- /ai/submodels/submodel[19]/count -->
		<int n="12" />  <!-- /ai/submodels/submodel[20]/count -->
		<int n="13" />  <!-- /ai/submodels/submodel[21]/count -->
        <int n="14" />  <!-- /ai/submodels/submodel[22]/count -->
		<int n="15" />  <!-- /ai/submodels/submodel[23]/count -->
		<int n="16" />  <!-- /ai/submodels/submodel[24]/count -->
		<int n="17" />  <!-- /ai/submodels/submodel[25]/count -->
		<int n="18" />  <!-- /fdm/jsbsim/systems/armament/bomb-pylons -->
        <int n="19" />  <!-- /fdm/jsbsim/systems/armament/outer-pylons -->
		<int n="20" />  <!-- /fdm/jsbsim/systems/armament/inner-pylons -->
		
        <float n="0"/> <!-- inner gear door pos -->
        <float n="1"/>
        <float n="2"/>
        <float n="3" /> <!-- /fdm/jsbsim/systems/cooling/radiator-door-pos -->
        <float n="4" /> <!-- /fdm/jsbsim/systems/cooling/oil-door-pos -->
        <float n="5" /> <!-- /fdm/jsbsim/gear/unit[2]/steering-angle-deg -->
        <float n="6" alias="/controls/lighting/wing-position-lights"/>
        <float n="7" alias="/controls/lighting/tail-position-lights"/>
        <float n="8" /> <!-- /controls/lighting/red-rec-light -->
        <float n="9" /> <!-- /controls/lighting/green-rec-light -->
        <float n="10" /> <!-- /controls/lighting/amber-rec-light -->
        <string n="0" type="string"/>
    </generic>
  </multiplay>

  <!-- increase pilot g tolarance -->
  <!-- this plane has g-suit support so the pilot
       can tolerate high G levels -->
  <rendering>
    <redout>
       <parameters>
         <blackout-onset-g type="double">5.0</blackout-onset-g>
         <blackout-complete-g type="double">7.0</blackout-complete-g>
         <redout-onset-g type="double">-2.5</redout-onset-g>
         <redout-complete-g type="double">-3.5</redout-complete-g>
       </parameters>
    </redout>
  </rendering>
  
  <signals>
    <fdm-initialized type="int">0</fdm-initialized>
  </signals>

 <menubar include="Dialogs/menu-bar.xml" />
   <checklists include="Checklists/p51d-checklists.xml"/>

         <current-view>
             <z-offset-dec-step type="double">0.0</z-offset-dec-step>
             <z-offset-inc-step type="double">0.0</z-offset-inc-step>
             <can-change-z-offset type="bool">false</can-change-z-offset>
 
             <z-offset-min-m type="float">10.0</z-offset-min-m>
             <z-offset-max-m type="float">300.0</z-offset-max-m>
         </current-view>

        <!-- Fix scrolling direction of knobs -->
        <mouse>
            <invert-mouse-wheel type="bool">true</invert-mouse-wheel>
        </mouse>

    </sim>

 <instrumentation>
    <magnetic-compass>
       <bookmark-heading-deg type="double">43.0</bookmark-heading-deg>
    </magnetic-compass>
    <comm n="1">
       <power-btn type="int">0</power-btn>
    </comm> 
 </instrumentation>
 
  <gear>
    <gear n="1">
       <position-norm type="float">1</position-norm>
    </gear>
    <jackstandsZ type="float">0</jackstandsZ>
 </gear>
 
 <input>
     <keyboard include="Sim/keyboard.xml"/>
    <mice include="Sim/mice.xml"/>
 </input>
 
<!-- initialize control properties -->
 <canopy>
      <position-norm type="float">1.0</position-norm>
      <direction type="int">1</direction>
 </canopy>
 <controls>   
   <engines>
      <engine n="0">
        <magnetos type="int">0</magnetos>
        <supercharger-switch type="int">0</supercharger-switch>
        <blower-light-check type="int">0</blower-light-check>
        <primer-time type="float">0.0</primer-time>
        <master-bat type="int">0</master-bat>
      </engine>
   </engines>
   <lighting>
      <tail-position-lights type="int">0</tail-position-lights>
      <wing-position-lights type="int">0</wing-position-lights>
      <red-rec-light type="int"> 0 </red-rec-light>
      <green-rec-light type="int"> 0 </green-rec-light>
      <amber-rec-light type="int"> 0 </amber-rec-light>
      <red-rec-light-sw type="int"> 0 </red-rec-light-sw>
      <green-rec-light-sw type="int"> 0 </green-rec-light-sw>
      <amber-rec-light-sw type="int"> 0 </amber-rec-light-sw>
      <rec-light-key type="int">0</rec-light-key>
      <right-flor-pos type="int"> 0 </right-flor-pos>
      <left-flor-pos type="int">0</left-flor-pos>
   </lighting>
   <electric>
      <reset type="int">0</reset>
   </electric>
   <anti-ice>
     <pitot-heat type="int"> 0 </pitot-heat>
     <gun-heat type="int"> 0 </gun-heat>
   </anti-ice>
   <canopy>
      <open-command type="float">1.0</open-command>
   </canopy>
   <fuel>
      <on type="bool">false</on>
      <tank-selector type="int">0</tank-selector>
      <tank n="1">
         <to_tank type="int">1</to_tank>
      </tank>
      <tank n="2">
         <to_tank type="int">2</to_tank>
      </tank>
      <tank n="3">
         <to_tank type="int">3</to_tank>
      </tank>
      <tank n="4">
         <to_tank type="int">4</to_tank>
      </tank>
   </fuel>
   <armament>
     <User-Selected-Stores type="int">0</User-Selected-Stores>
     <gunsight>		
		<!-- gunsight computer parameters -->
        
        <!-- start/stop the sight computer
       	     the computer will be reinitialized if the power is cycled -->	
        <computer-on type="int">0</computer-on>			 	
        <!-- offset of guns below sight line in feet -->		
		<z-offsetFeet type="float">3.125</z-offsetFeet>
		<!-- average lateral offset of guns in feet relative to sight line -->
        <y-offsetFeet type="float">0.0</y-offsetFeet>
		<!-- elevation of guns relative to alpha in degrees -->
        <gunElevationDegrees type="float">1.0</gunElevationDegrees>
        <ballisticCoefficienct type="float">0.00136354</ballisticCoefficienct> <!-- 0.50 BMG -->
        <muzzleVelocity type="float">2900.0</muzzleVelocity>  <!-- feet per second 0.50 BMG -->
		<!-- convergence distance in feet -->
        <gunHarminizationRangeFeet type="float">900.0</gunHarminizationRangeFeet>
		<timeStep type="float">0.1</timeStep>  <!-- cycle rate of gun sight computer in seconds -->
		<!-- sight computer damping factor must be between 0.3 and 1.0 -->
		<dampingFactor type="float">1.0</dampingFactor>	
		<gunsight-computer-initialized type="int">0</gunsight-computer-initialized>
		<maxAzimuth type="int">170</maxAzimuth>  <!-- maximum sight deflection in mils -->
		<maxElevation type="int">170</maxElevation>
        <SIG type="float">0.4</SIG>
        <timeStep type="float">0.2</timeStep>
		
		<!-- K14 parameters -->
		
		<power-on type="int">0</power-on>
        <intensity type="float">1.0</intensity>
		<mask-off type="int">1</mask-off>
		<reticleSelectorPos type="int">0</reticleSelectorPos>
		<rocketLadder type="int">1</rocketLadder>  <!-- set to 0 for K14 and 1 for other K14 models -->
		
		<!-- The next three are to setup the reticle to the correct starting values -->
		<span type="int">30</span>
		<mils type="float">0.0</mils>
		<range type="float">1000.0</range> <!-- in feet -->
		
		<fixedReticleOn type="int">0</fixedReticleOn>
		<zCenterLine type="float">0.7375</zCenterLine> <!-- sight line distance from model z axis in meters -->
		<K14C type="int">0</K14C>  <!-- set to 1 for K14C -->
		
		<sunScreenDown type="int">1</sunScreenDown>
     </gunsight>
	 <throttle>
	    <twistCenterX type="float">0.0985 </twistCenterX>
		<twistCenterZ type="float">0.0827 </twistCenterZ>
	 </throttle>
     <weapons-select type="int">0</weapons-select>
     <next-RX type="int">1</next-RX>
     <instant type="int">1</instant>
     <rockets type="int"> 0 </rockets>
     <bombs-train type="int"> 0 </bombs-train>
     <bombs-both type="int"> 0 </bombs-both>
     <guns-enabled type="int">0</guns-enabled>p
     <left-bomb-arm-chem-release type="int">0</left-bomb-arm-chem-release>
     <right-bomb-arm-chem-release type="int">0</right-bomb-arm-chem-release>
     <rocket-controler type="int"> 0 </rocket-controler>
     <triggerLast type="int"> 0 </triggerLast>
     <salvoCount type="int"> 1 </salvoCount>
     <trigger-released type="int"> 0 </trigger-released>
     <trigger type="int">0</trigger>
     <guns-enabled type="int"> 0 </guns-enabled>
     <trigger2 type="bool"> 0 </trigger2>
     <bomb-trigger-1 type="int">0</bomb-trigger-1>
     <bomb-trigger-2 type="int">0</bomb-trigger-2>
     <drop-tank-release-2 type="int">0</drop-tank-release-2>
     <drop-tank-release-1 type="int">0</drop-tank-release-1>
     <salvo-right type="int">0</salvo-right>
     <salvo-left type="int">0</salvo-left>
     <salvo-right-hs type="int">0</salvo-right-hs>
     <salvo-left-hs type="int">0</salvo-left-hs>
     <salvo-both type="int">0</salvo-both>
     <trigger type="int">0</trigger>
     <rocket n="1">
       <trigger type="int">0</trigger>
     </rocket>
     <rocket n="2">
       <trigger type="int">0</trigger>
     </rocket>
     <rocket n="3">
       <trigger type="int">0</trigger>
     </rocket>
     <rocket n="4">
       <trigger type="int">0</trigger>
     </rocket>
     <rocket n="5">
       <trigger type="int">0</trigger>
     </rocket>
     <rocket n="6">
       <trigger type="int">0</trigger>
     </rocket>
     <rocket n="7">
       <trigger type="int">0</trigger>
     </rocket>
     <rocket n="8">
       <trigger type="int">0</trigger>
     </rocket>
     <rocket n="9">
       <trigger type="int">0</trigger>
     </rocket>
     <rocket n="10">
       <trigger type="int">0</trigger>
     </rocket>
   </armament>
   <gear>
      <gear-safe-light-check type="int">0</gear-safe-light-check>
      <gear-unsafe-light-check type="int">0</gear-unsafe-light-check>
      <leverPos type="float">0.0</leverPos>
   </gear>
   <flight>
      <flaps type="float">0.0</flaps>
   </flight>   
        <switches>
            <starter type="bool">false</starter>
            <primer type="bool">false</primer>

            <supercharger-guard-switch type="bool">false</supercharger-guard-switch>
            <starter-guard-switch type="bool">false</starter-guard-switch>
            <primer-guard-switch type="bool">false</primer-guard-switch>
        </switches>
    </controls>
    <aircraft>
        <afcs>
            <locks>
                <roll type="bool">false</roll>
                <pitch type="bool">false</pitch>
                <speed type="bool">false</speed>
                <rudder type="bool">false</rudder>
                <tail type="bool">false</tail>
                <takeoff type="bool">false</takeoff>
                <wings-level-vs-hold type="bool">false</wings-level-vs-hold>
            </locks>
            <target>
                <heading-deg type="float">0.0</heading-deg>
                <speed-kt type="float">80.0</speed-kt>
                <pitch-deg type="float">2.0</pitch-deg>
                <roll-deg type="float">0.0</roll-deg>
                <vs-fpm type="float">0.0</vs-fpm>

                <pitch-rate-degps type="float">0.0</pitch-rate-degps>
                <roll-rate-degps type="float">0.0</roll-rate-degps>
            </target>
            <settings>
                <roll-rate-limit type="double">60.0</roll-rate-limit>
                <pitch-rate-limit type="double">10.0</pitch-rate-limit>

                <roll-hold-limit type="double">25.0</roll-hold-limit>

                <pitch-hold-min type="double">-3.0</pitch-hold-min>
                <pitch-hold-max type="double">15.0</pitch-hold-max>
            </settings>
        </afcs>
    </aircraft>

 <consumables>
   <fuel>
      <tank n="0">
         <name>Main Left Wing</name>
      </tank>
      <tank n="1">
         <name>Main Right Wing</name>
      </tank>
      <tank n="2">
         <name>Fuselage</name>
      </tank>
      <tank n="3">
         <name>Combat Tank Left</name>
      </tank>
      <tank n="4">
         <name>Combat Tank Right</name>
      </tank>
   </fuel>
 </consumables>
 
 <fdm>
   <jsbsim>
      <velocities>
        <zero type="float">0.0</zero>
      </velocities> 
      <propulsion>
        <engine>
          <prop-induced-velocity_fps_clipped type="float">0.0</prop-induced-velocity_fps_clipped>
        </engine>
      </propulsion>        
      <systems>
        <pilotAlwaysVisible type="int">0</pilotAlwaysVisible>
        <compressibility>
           <hertz type="float">0.0</hertz>
           <strength type="float">0.0</strength>
        </compressibility>     
        <crash-detect>
          <wing-load type="float">0.0</wing-load>
        </crash-detect> 
        <armament>
           <trigger-both type="int">0</trigger-both>
           <trigger-right type="int">0</trigger-right>
           <trigger-left type="int">0</trigger-left>
        </armament>
        <Ox>
           <blinker type="int">0</blinker>
           <pressure type="float"> 400.0 </pressure>
        </Ox>
        <hydraulic>
           <pressure type="float"> 0.0 </pressure>
        </hydraulic>
        <brakes>
            <brake-scaling type="float">1.0</brake-scaling>
        </brakes>
        <cooling>
           <radiator-door-pos type="float"> 0.0 </radiator-door-pos>
           <oil-door-pos type="float"> 0.0 </oil-door-pos>
        </cooling>
      </systems>
      <ap>
        <map-error type="float">0.0</map-error>
      </ap>
      <fcs>
        <flap-cmd-norm type="float">1.0</flap-cmd-norm>
        <qbar-psf_clipped type="float">0.0</qbar-psf_clipped>
      </fcs>  
   </jsbsim>
 </fdm>
 
<ai>
   <submodels>
      <submodel n="2">
         <count type="int">0</count>
      </submodel>
      <submodel n="3">
         <count type="int">0</count>
      </submodel>
      <submodel n="4">
         <count type="int">0</count>
      </submodel>
      <submodel n="5">
         <count type="int">0</count>
      </submodel>
      <submodel n="6">
         <count>0</count>
      </submodel>
      <submodel n="7">
         <count type="int">0</count>
      </submodel>
      <submodel n="8">
         <count type="int">0</count>
      </submodel>
      <submodel n="9">
         <count type="int">0</count>
      </submodel>
      <submodel n="10">
         <count type="int">0</count>
      </submodel>
      <submodel n="11">
         <count type="int">0</count>
      </submodel>
      <submodel n="12">
         <count>0</count>
      </submodel>
      <submodel n="13">
         <count type="int">0</count>
      </submodel>
      <submodel n="14">
         <count type="int">0</count>
      </submodel>
      <submodel n="15">
         <count type="int">0</count>
      </submodel>
      <submodel n="16">
         <count type="int">0</count>
      </submodel>
      <submodel n="17">
         <count type="int">0</count>
      </submodel>
      <submodel n="18">
         <count type="int">0</count>
      </submodel>
      <submodel n="19">
         <count type="int">0</count>
      </submodel>
      <submodel n="20">
         <count type="int">0</count>
      </submodel>
      <submodel n="21">
         <count type="int">0</count>
      </submodel>
	  <submodel n="22">
         <count type="int">0</count>
      </submodel>
      <submodel n="23">
         <count type="int">0</count>
      </submodel>
	  <submodel n="24">
         <count type="int">0</count>
      </submodel>
      <submodel n="25">
         <count type="int">0</count>
      </submodel>
   </submodels>
 </ai>

  <nasal>
    <p51d>
      <file>Aircraft/p51d/Nasal/over-ride-flaps.nas</file>
      <file>Aircraft/p51d/Nasal/stores.nas</file>
      <file>Aircraft/p51d/Nasal/limits.nas</file>
      <file>Aircraft/p51d/Nasal/engine-start.nas</file>
      <file>Aircraft/p51d/Nasal/sputter.nas</file>
      <file>Aircraft/p51d/Nasal/gear-doors.nas</file>
      <file>Aircraft/p51d/Nasal/liveries.nas</file>
      <file>Aircraft/p51d/Nasal/tyresmoke.nas</file>
      <file>Aircraft/p51d/Nasal/damage.nas</file>
      <file>Aircraft/p51d/Nasal/sound.nas</file>
      <file>Aircraft/p51d/Nasal/autopilot.nas</file>
      <file>Aircraft/p51d/Nasal/payloads.nas</file>
    </p51d>
    <SCR_522C>
      <file>Aircraft/Instruments-3d/SCR-522C/Nasal/SCR-522C.nas</file>
    </SCR_522C>
	<K14>
	  <file>Aircraft/Instruments-3d/computing-gun-sights/Nasal/lead-computer.nas</file>
	  <file>Aircraft/Instruments-3d/computing-gun-sights/K14/Nasal/K14-reticle.nas</file>
	</K14>
  </nasal>

</PropertyList>
